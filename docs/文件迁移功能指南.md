# 文件迁移功能使用指南

## 功能概述

**大文件磁盘迁移功能** 允许您将C盘中的大文件安全地移动到其他磁盘（D盘、E盘等），同时在原位置创建符号链接，使得应用程序无需任何修改即可继续访问这些文件。

## 功能特点

✅ **文件无缝迁移** - 将大文件从C盘迁移到其他磁盘  
✅ **符号链接** - 在原位置创建符号链接，保持文件访问路径  
✅ **智能推荐** - 自动评估文件安全等级，智能推荐可安全迁移的文件  
✅ **批量操作** - 支持一次性选择多个文件进行迁移  
✅ **实时进度** - 显示迁移进度和详细状态  
✅ **结果反馈** - 清晰显示迁移成功/失败的文件统计  

## 使用步骤

### 1. 查找大文件
   - 打开 CleanC 应用
   - 点击左侧菜单的 **"大文件查找"**
   - 选择最小文件大小（如 100MB、500MB、1GB）
   - 点击 **"查找大文件"** 按钮

### 2. 选择要迁移的文件
   - 等待扫描完成后，查看文件列表
   - 系统会自动评估每个文件的安全等级：
     - 🟢 **安全可删** - 临时文件/备份文件，可安全迁移
     - 🟠 **确认后可删** - 建议检查后再决定
     - 🔴 **建议保留** - 可能是重要文件，谨慎迁移
   
   - 手动勾选文件，或点击 **"智能推荐"** 自动选择安全文件

### 3. 开始迁移
   - 点击 **"迁移文件"** 按钮（蓝色按钮）
   - 系统会显示可用的磁盘列表
   - 选择一个有足够空间的目标磁盘（如D盘或E盘）
   - 查看磁盘的可用空间和使用率

### 4. 确认并等待
   - 确认迁移操作
   - 系统会显示实时进度：
     - 当前处理的文件名
     - 进度百分比
     - 已迁移文件数/总文件数

### 5. 查看结果
   - 迁移完成后，查看成功/失败统计
   - 文件存储位置：`{目标磁盘}:\CleanC_Migrated\...`
   - 原位置保留符号链接

## 技术原理

### 迁移流程
1. **复制文件** - 将文件从C盘复制到目标磁盘的 `CleanC_Migrated` 文件夹
2. **保留结构** - 维持原有的目录结构  
   例如：`C:\Users\AA\file.txt` → `D:\CleanC_Migrated\Users\AA\file.txt`
3. **文件验证** - 对比源文件和目标文件的大小，确保复制完整
4. **删除源文件** - 删除C盘中的原文件
5. **创建符号链接** - 在原位置创建符号链接指向目标文件  
   使用 `mklink` 命令：`mklink "C:\Users\AA\file.txt" "D:\CleanC_Migrated\Users\AA\file.txt"`

### 符号链接的作用
- 符号链接是一个特殊的"指针"文件
- 对于应用程序来说，符号链接与原文件完全相同
- 读写操作会自动转发到实际文件位置
- **无需修改任何程序配置或路径**

## 重要注意事项

### ⚠️ 管理员权限
- 创建符号链接需要 **管理员权限**
- 建议以管理员身份运行 CleanC
- 如果失败，文件将保持在原位置（自动恢复）

### ⚠️ 文件安全
- 迁移前请确保文件不在使用中
- 建议备份重要文件
- 系统文件不应迁移

### ⚠️ 磁盘空间
- 确保目标磁盘有足够的可用空间
- 迁移过程中需要双倍空间（复制完成前）

### ⚠️ 网络驱动器
- 不支持迁移到网络驱动器或U盘
- 仅支持本地固定磁盘

## 常见问题 (FAQ)

**Q: 符号链接会影响程序运行吗？**  
A: 不会。对于程序来说，符号链接与普通文件完全一样，可以正常读写。

**Q: 迁移失败怎么办？**  
A: 如果迁移失败，系统会自动恢复文件到原位置，不会造成数据丢失。

**Q: 可以迁移哪些类型的文件？**  
A: 建议迁移视频、压缩包、大型安装包等非系统关键文件。

**Q: 迁移后C盘空间会立即释放吗？**  
A: 是的，符号链接文件非常小（KB级别），原文件的空间会被释放。

**Q: 如何撤销迁移？**  
A: 只需删除符号链接，然后将实际文件从目标磁盘复制回原位置即可。

**Q: 需要管理员权限吗？**  
A: 建议以管理员身份运行，否则符号链接创建可能失败。

## 故障排除

### 符号链接创建失败
**症状**：提示"创建符号链接失败（可能需要管理员权限）"  
**解决**：
1. 右键点击 CleanC 快捷方式
2. 选择"以管理员身份运行"
3. 重试迁移操作

### 目标磁盘不可用
**症状**：未找到可用的目标磁盘  
**解决**：
1. 确保电脑有除C盘外的其他本地磁盘
2. 检查磁盘是否有足够的可用空间
3. 确保磁盘未被加密或锁定

### 部分文件迁移失败
**症状**：部分文件成功，部分失败  
**解决**：
1. 检查失败文件是否被其他程序占用
2. 关闭相关程序后重试
3. 检查目标磁盘权限

## 最佳实践

1. ✅ **定期迁移**  
   每月运行一次，保持C盘整洁

2. ✅ **优先迁移大文件**  
   重点关注 500MB 以上的文件

3. ✅ **使用智能推荐**  
   让系统自动筛选安全文件

4. ✅ **验证后删除**  
   迁移后可先验证文件访问正常，再删除原文件

5. ✅ **保留路径结构**  
   系统会自动维护目录结构，便于管理

## 技术支持

如有疑问或需要帮助，请联系：
- **邮箱**: junhe421@gmail.com
- **QQ群**: 960598442
- **GitHub**: https://github.com/junhe421/CleanC

---

**CleanC** - 让 C 盘清理变得简单  
© 2025 Next Wave. 保留所有权利。
